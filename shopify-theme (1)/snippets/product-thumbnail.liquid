<div class="product__media media">
  {%- if media.media_type == 'video' or media.media_type == 'external_video' -%}
    <div class="product__media-video">
      {%- if media.media_type == 'video' -%}
        {{ media | video_tag: controls: true, muted: loop }}
      {%- else -%}
        {{ media | external_video_tag }}
      {%- endif -%}
    </div>
  {%- else -%}
    <img
      srcset="{%- if media.width >= 165 -%}{{ media | image_url: width: 165 }} 165w,{%- endif -%}
        {%- if media.width >= 360 -%}{{ media | image_url: width: 360 }} 360w,{%- endif -%}
        {%- if media.width >= 533 -%}{{ media | image_url: width: 533 }} 533w,{%- endif -%}
        {%- if media.width >= 720 -%}{{ media | image_url: width: 720 }} 720w,{%- endif -%}
        {%- if media.width >= 940 -%}{{ media | image_url: width: 940 }} 940w,{%- endif -%}
        {%- if media.width >= 1066 -%}{{ media | image_url: width: 1066 }} 1066w,{%- endif -%}
        {{ media | image_url }} {{ media.width }}w"
      src="{{ media | image_url: width: 533 }}"
      sizes="(min-width: 1200px) 715px, (min-width: 990px) calc(65.0vw - 10rem), (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)"
      alt="{{ media.alt | escape }}"
      loading="lazy"
      width="{{ media.width }}"
      height="{{ media.height }}"
    >
  {%- endif -%}
</div>
